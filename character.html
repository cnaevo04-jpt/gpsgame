<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ÂõΩÈÅìÂÜíÈô∫Ë®ò - „Ç≠„É£„É©Âõ≥Èëë</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }
        
        .header h1 {
            margin: 0;
            font-size: 1.8em;
            color: #4a90e2;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .collection-stats {
            position: absolute;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            background: rgba(74, 144, 226, 0.1);
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            color: #4a90e2;
            font-weight: 600;
        }
        
        .filter-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .filter-tab {
            background: rgba(255, 255, 255, 0.7);
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s ease;
            color: #666;
        }
        
        .filter-tab.active {
            background: #4a90e2;
            color: white;
            box-shadow: 0 2px 10px rgba(74, 144, 226, 0.3);
        }
        
        .character-grid {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }
        
        .character-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            text-align: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
        }
        
        .character-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .character-card.locked {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .character-card.locked:hover {
            transform: translateY(-3px);
        }
        
        .image-container {
            width: 100%;
            height: 140px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        .image-container.unlocked {
            background: linear-gradient(45deg, #4a90e2, #667eea);
        }
        
        .image-container.locked {
            background: linear-gradient(45deg, #bbb, #ddd);
            position: relative;
        }
        
        .image-container.locked::before {
            content: 'üîí';
            font-size: 3em;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
        }
        
        .character-emoji {
            font-size: 4em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .character-card.locked .character-emoji {
            filter: grayscale(100%) brightness(0.5);
            opacity: 0.3;
        }
        
        .details {
            padding: 15px 10px;
        }
        
        .character-name {
            margin: 0 0 5px;
            font-size: 1.1em;
            font-weight: 600;
            color: #444;
        }
        
        .character-card.locked .character-name {
            color: #999;
        }
        
        .road-info {
            margin: 0 0 8px;
            font-size: 0.9em;
            color: #4a90e2;
            font-weight: 500;
        }
        
        .character-card.locked .road-info {
            color: #bbb;
        }
        
        .completion-status {
            font-size: 0.8em;
            padding: 4px 8px;
            border-radius: 12px;
            display: inline-block;
            font-weight: 500;
        }
        
        .status-completed {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
        }
        
        .status-locked {
            background: rgba(158, 158, 158, 0.2);
            color: #9e9e9e;
        }
        
        .navbar {
            display: flex;
            justify-content: space-around;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 10px 0;
            box-shadow: 0 -4px 15px rgba(0,0,0,0.1);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .nav-item {
            text-align: center;
            flex: 1;
            text-decoration: none;
            color: #888;
            transition: all 0.2s;
            padding: 5px;
            border-radius: 10px;
        }
        
        .nav-item.active {
            color: #4a90e2;
            background: rgba(74, 144, 226, 0.1);
        }
        
        .nav-item:hover {
            color: #4a90e2;
            background: rgba(74, 144, 226, 0.05);
        }
        
        .nav-icon {
            height: 24px;
            width: 24px;
            display: block;
            margin: 0 auto 5px;
            font-size: 20px;
        }
        
        .nav-item span {
            font-size: 0.8em;
            font-weight: 500;
        }
        
        /* „Ç≠„É£„É©„ÇØ„Çø„ÉºË©≥Á¥∞„É¢„Éº„ÉÄ„É´ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            max-width: 350px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .modal-character-emoji {
            font-size: 5em;
            margin-bottom: 15px;
            display: block;
        }
        
        .close-button {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }
        
        @media (max-width: 480px) {
            .character-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 12px;
                padding: 15px;
            }
            
            .collection-stats {
                position: static;
                transform: none;
                margin-top: 10px;
                display: inline-block;
            }
            
            .header {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéå „Ç≠„É£„É©Âõ≥Èëë</h1>
        <div class="collection-stats" id="collectionStats">
            üèÜ 12 / 47 (25%)
        </div>
        
        <div class="filter-tabs">
            <button class="filter-tab active" onclick="filterCharacters('all')">ÂÖ®„Å¶</button>
            <button class="filter-tab" onclick="filterCharacters('unlocked')">ÂÖ•ÊâãÊ∏à„Åø</button>
            <button class="filter-tab" onclick="filterCharacters('locked')">Êú™ÂÖ•Êâã</button>
        </div>
    </div>
    
    <div class="character-grid" id="characterGrid">
        <!-- „Ç≠„É£„É©„ÇØ„Çø„Éº„Ç´„Éº„Éâ„ÅØJS„ÅßÂãïÁöÑÁîüÊàê -->
    </div>
    
    <!-- „Ç≠„É£„É©„ÇØ„Çø„ÉºË©≥Á¥∞„É¢„Éº„ÉÄ„É´ -->
    <div class="modal" id="characterModal">
        <div class="modal-content">
            <button class="close-button" onclick="closeModal()">&times;</button>
            <div class="modal-character-emoji" id="modalEmoji">üöó</div>
            <h2 id="modalName">„Ç≠„É£„É©„ÇØ„Çø„ÉºÂêç</h2>
            <p id="modalRoad">ÂõΩÈÅì1Âè∑</p>
            <p id="modalDescription">„Ç≠„É£„É©„ÇØ„Çø„Éº„ÅÆË™¨Êòé„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ</p>
            <div id="modalStats"></div>
        </div>
    </div>
    
    <nav class="navbar">
        <a href="gps9" class="nav-item">
            <span class="nav-icon">üó∫Ô∏è</span>
            <span>„Éû„ÉÉ„Éó</span>
        </a>
        <a href="#" class="nav-item active">
            <span class="nav-icon">üë•</span>
            <span>„Ç≠„É£„É©Âõ≥Èëë</span>
        </a>
        <a href="#" class="nav-item">
            <span class="nav-icon">‚ù§Ô∏è</span>
            <span>„Éó„É≠„Éï„Ç£„Éº„É´</span>
        </a>
        <a href="#" class="nav-item">
            <span class="nav-icon">‚öôÔ∏è</span>
            <span>Ë®≠ÂÆö</span>
        </a>
    </nav>

    <script>
        // ÂõΩÈÅì„Ç≠„É£„É©„ÇØ„Çø„Éº„Éá„Éº„Çø
        const characters = [
            // ‰∏ªË¶ÅÂõΩÈÅì (1-10Âè∑)
            { id: 1, name: "„ÅÑ„Å°„Çç„ÅÜ", emoji: "üöó", road: 1, unlocked: true, description: "Êù±Êµ∑ÈÅì„ÅÆÂÆàË≠∑ËÄÖ„ÄÇÊù±‰∫¨„Åã„ÇâÂ§ßÈò™„ÇíÁµê„Å∂Ê≠¥Âè≤„ÅÇ„ÇãÂõΩÈÅì„ÅÆ„Ç≠„É£„É©„ÇØ„Çø„Éº„ÄÇ" },
            { id: 2, name: "„Å´„Åò„Åã", emoji: "üåà", road: 2, unlocked: true, description: "Â±±ÈôΩÈÅì„ÅÆÊ°àÂÜÖÂΩπ„ÄÇÂ§ßÈò™„Åã„Çâ‰πùÂ∑û„Å∏„Å®Á∂ö„ÅèÈï∑„ÅÑÊóÖË∑Ø„ÅÆ‰ª≤Èñì„ÄÇ" },
            { id: 3, name: "„Åï„Å∂„Çç„ÅÜ", emoji: "‚õ©Ô∏è", road: 3, unlocked: false, description: "‰πùÂ∑ûÁ∏¶Êñ≠„ÅÆÊóÖ‰∫∫„ÄÇÁ¶èÂ≤°„Åã„ÇâÈπøÂÖêÂ≥∂„Åæ„Åß‰πùÂ∑û„ÇíÁ∏¶„Å´Ë≤´„ÅèÈÅì„ÅÆÁ≤æÈúä„ÄÇ" },
            { id: 4, name: "„Çà„Å§„Å∞", emoji: "üçÄ", road: 4, unlocked: false, description: "Êù±Âåó„Å∏„ÅÆÈÅìÊ®ô„ÄÇÊù±‰∫¨„Åã„ÇâÈùíÊ£Æ„Å∏„ÅÆÈï∑„ÅÑÈÅì„ÅÆ„Çä„ÇíË¶ãÂÆà„ÇãÂ≠òÂú®„ÄÇ" },
            { id: 5, name: "„Åî„Çç„ÅÜ", emoji: "üóæ", road: 5, unlocked: false, description: "Êó•Êú¨Êµ∑„ÅÆÈ¢®„ÇíÈÅã„Å∂„ÄÇÊñ∞ÊΩü„Åã„ÇâÂ±±ÂΩ¢„ÄÅÁßãÁî∞„Å∏„Å®Á∂ö„ÅèÊµ∑Ê≤ø„ÅÑ„ÅÆÈÅì„ÅÆÁï™‰∫∫„ÄÇ" },
            { id: 6, name: "„Çç„Åè„Åô„Åë", emoji: "üèîÔ∏è", road: 6, unlocked: false, description: "Â±±Èñì„ÅÆÊ°àÂÜÖËÄÖ„ÄÇÁæ§È¶¨„Åã„ÇâÊñ∞ÊΩü„Å∏„ÅÆÂ≥†ÈÅì„ÇíÁü•„ÇäÂ∞Ω„Åè„Åó„Åü„Ç¨„Ç§„Éâ„ÄÇ" },
            { id: 7, name: "„Å™„Å™„Åì", emoji: "üå∏", road: 7, unlocked: false, description: "Ê°úÂâçÁ∑ö„Å®ÂÖ±„Å´„ÄÇÁ¶èÂ≥∂„Åã„ÇâÊñ∞ÊΩü„Å∏„Å®Á∂ö„ÅèËä±„ÅÆÈÅì„ÅÆÂ¶ñÁ≤æ„ÄÇ" },
            { id: 8, name: "„ÅØ„Å°„Åπ„Åà", emoji: "üéã", road: 8, unlocked: false, description: "Èñ¢Ë•ø„ÅÆÁµê„Å≥Êâã„ÄÇ‰∫¨ÈÉΩ„Åã„ÇâÂíåÊ≠åÂ±±„ÄÅÂ•àËâØ„ÇíÁµê„Å∂Âè§ÈÉΩ„ÅÆÂÆà„ÇäÁ•û„ÄÇ" },
            { id: 9, name: "„Åç„ÇÖ„ÅÜ„Å°„ÇÉ„Çì", emoji: "üéå", road: 9, unlocked: false, description: "Èñ¢Êù±„ÅÆÂ§ßÂãïËÑà„ÄÇÊù±‰∫¨ÈÉΩÂøÉ„Åã„ÇâËå®Âüé„Å∏„Å®Âêë„Åã„ÅÜÁèæ‰ª£„ÅÆÈÅì„Åó„Çã„Åπ„ÄÇ" },
            { id: 10, name: "„Å®„Åä„Çã", emoji: "üåä", road: 10, unlocked: false, description: "Â§™Âπ≥Ê¥ã„ÅÆÈ¢®„ÄÇÊù±‰∫¨„Åã„ÇâÈùôÂ≤°„Å∏„Å®Á∂ö„ÅèÊµ∑Â≤∏Á∑ö„ÅÆÊ°àÂÜÖËÄÖ„ÄÇ" },
            
            // ‰∏≠Ë∑ùÈõ¢ÂõΩÈÅì (11-30Âè∑)
            { id: 11, name: "„Åò„ÇÖ„ÅÜ„ÅÑ„Å°", emoji: "ü¶å", road: 11, unlocked: false, description: "Â•àËâØ„ÅÆ‰ΩøËÄÖ„ÄÇÂ•àËâØ„Åã„ÇâÂíåÊ≠åÂ±±„Å∏„ÅÆÂè§ÈÅì„ÅÆÈπø„ÅÆÁ≤æÈúä„ÄÇ" },
            { id: 12, name: "„Åò„ÇÖ„ÅÜ„Å´", emoji: "üé≠", road: 12, unlocked: false, description: "ÂõõÂõΩ„ÅÆËä∏ËÉΩÁ•û„ÄÇÂæ≥Â≥∂„Åã„ÇâÈ´òÁü•„Å∏„ÅÆÈô∫„Åó„ÅÑÈÅì„ÅÆÂÆàË≠∑ËÄÖ„ÄÇ" },
            { id: 15, name: "„Åò„ÇÖ„ÅÜ„Åî", emoji: "üçä", road: 15, unlocked: false, description: "„Åø„Åã„Çì„ÅÆÂõΩ„Åã„Çâ„ÄÇÈùôÂ≤°„Åã„ÇâÈï∑Èáé„Å∏„ÅÆÂ±±Â≤≥„É´„Éº„Éà„ÅÆÊ°àÂÜÖÂΩπ„ÄÇ" },
            { id: 16, name: "„Åò„ÇÖ„ÅÜ„Çç„Åè", emoji: "üèØ", road: 16, unlocked: false, description: "Âüé‰∏ãÁî∫Â∑°„Çä„ÄÇÂêçÂè§Â±ã„Åã„ÇâÂ≤êÈòú„Å∏„ÅÆÊ≠¥Âè≤Ë°óÈÅì„ÅÆÊ≠¶ËÄÖ„ÄÇ" },
            { id: 17, name: "„Åò„ÇÖ„ÅÜ„Å™„Å™", emoji: "üéø", road: 17, unlocked: false, description: "Èõ™ÂõΩ„Å∏„ÅÆÈÅì„ÄÇÈ´òÂ¥é„Åã„ÇâÊñ∞ÊΩü„Å∏„ÅÆÂ≥†Ë∂ä„Åà„ÅÆÈõ™„Å†„Çã„Åæ„ÄÇ" },
            { id: 18, name: "„Åò„ÇÖ„ÅÜ„ÅØ„Å°", emoji: "üå∫", road: 18, unlocked: false, description: "ÂçóÂõΩ„ÅÆÈ¢®„ÄÇÈ´òÁü•„Åã„ÇâÂÆøÊØõ„Å∏„ÅÆÂ§™Âπ≥Ê¥ãÂ≤∏„ÅÆËä±„ÅÆÁ≤æ„ÄÇ" },
            { id: 19, name: "„Åò„ÇÖ„ÅÜ„Åç„ÇÖ„ÅÜ", emoji: "üçë", road: 19, unlocked: false, description: "Ê°É„ÅÆÂõΩ„Åã„Çâ„ÄÇÁî≤Â∫ú„Åã„ÇâÈï∑Èáé„Å∏„ÅÆÊûúÊ®πÂúí„ÅÆÂ¶ñÁ≤æ„ÄÇ" },
            { id: 20, name: "„ÅØ„Åü„Å°", emoji: "üèîÔ∏è", road: 20, unlocked: false, description: "È£õÈ®®Â±±ËÑà„ÅÆÁï™‰∫∫„ÄÇÂ°©Â∞ª„Åã„ÇâÊùæÊú¨„Å∏„ÅÆÂ±±Â≤≥Âú∞Â∏Ø„ÅÆÂ≤©Áü≥Á≤æÈúä„ÄÇ" },
            { id: 23, name: "„Å´„Åò„ÇÖ„ÅÜ„Åï„Çì", emoji: "ü¶ã", road: 23, unlocked: false, description: "Ëù∂„ÅÆËàû„ÅÑË∏ä„ÇãÈÅì„ÄÇË±äÊ©ã„Åã„ÇâÈ£ØÁî∞„Å∏„ÅÆÂçó„Ç¢„É´„Éó„ÇπÈ∫ì„ÅÆÊ°àÂÜÖËÄÖ„ÄÇ" },
            { id: 24, name: "„Å´„Åò„ÇÖ„ÅÜ„Çà„Çì", emoji: "üåø", road: 24, unlocked: false, description: "Ê£Æ„ÅÆÊ°àÂÜÖ‰∫∫„ÄÇÂíåÊ≠åÂ±±„Åã„ÇâÂ•àËâØ„Å∏„ÅÆÁ¥Ä‰ºäÂ±±Âú∞„ÅÆÁ∑ë„ÅÆÁ≤æÈúä„ÄÇ" },
            { id: 25, name: "„Å´„Åò„ÇÖ„ÅÜ„Åî", emoji: "üçµ", road: 25, unlocked: true, description: "„ÅäËå∂„ÅÆÈ¶ô„ÇäÈÅì„ÄÇÂêçÂè§Â±ã„Åã„ÇâÂ•àËâØ„Å∏„ÅÆÂè§ÈÉΩÁµê„Å∂Ëå∂„ÅÆÂ¶ñÁ≤æ„ÄÇ" },
            
            // Âú∞ÊñπÂõΩÈÅì
            { id: 176, name: "„Å≤„ÇÉ„Åè„Å™„Å™„Åò„ÇÖ„ÅÜ„Çç„Åè", emoji: "üéã", road: 176, unlocked: true, description: "Á´πÊûó„ÅÆÊ°àÂÜÖËÄÖ„ÄÇÂ§ßÈò™„Åã„Çâ‰∫¨ÈÉΩ„Å∏„ÅÆÁæé„Åó„ÅÑÁ´π„ÅÆÈÅì„ÅÆÁ≤æÈúä„ÄÇ" },
            { id: 246, name: "„Å´„Å≤„ÇÉ„Åè„Çà„Çì„Åò„ÇÖ„ÅÜ„Çç„Åè", emoji: "üåà", road: 246, unlocked: false, description: "Ëôπ„ÅÆÊû∂„ÅëÊ©ã„ÄÇÊù±‰∫¨„Åã„ÇâÊ≤ºÊ¥•„Å∏„ÅÆÊù±Êµ∑ÈÅì„ÅÆÁèæ‰ª£ÁâàÊ°àÂÜÖÂΩπ„ÄÇ" },
            
            // ËøΩÂä†„ÅÆÂú∞ÊñπÂõΩÈÅìÔºà‰æãÔºâ
            { id: 45, name: "„Çà„Çì„Åò„ÇÖ„ÅÜ„Åî", emoji: "üçÄ", road: 45, unlocked: false, description: "ÂåóÊµ∑ÈÅì„ÅÆÂ§ßÂú∞„ÄÇÊú≠Âπå„Åã„ÇâÊ†πÂÆ§„Å∏„ÅÆÈÅìÊù±„ÅÆÊ°àÂÜÖËÄÖ„ÄÇ" },
            { id: 58, name: "„Åî„Åò„ÇÖ„ÅÜ„ÅØ„Å°", emoji: "üå∫", road: 58, unlocked: false, description: "Ê≤ñÁ∏Ñ„ÅÆÈ¢®„ÄÇÈÇ£Ë¶á„Åã„ÇâÂêçË≠∑„Å∏„ÅÆÂçóÂõΩ„ÅÆÈÅì„ÅÆÁ≤æÈúä„ÄÇ" },
        ];
        
        let currentFilter = 'all';
        let unlockedCharacters = JSON.parse(localStorage.getItem('unlockedCharacters')) || [1, 2, 25, 176];
        
        // „Ç≠„É£„É©„ÇØ„Çø„Éº„ÅÆ„É≠„ÉÉ„ÇØÁä∂ÊÖã„ÇíÊõ¥Êñ∞
        function updateCharacterUnlockStatus() {
            characters.forEach(char => {
                char.unlocked = unlockedCharacters.includes(char.road);
            });
        }
        
        // „Ç≥„É¨„ÇØ„Ç∑„Éß„É≥Áµ±Ë®à„ÇíÊõ¥Êñ∞
        function updateCollectionStats() {
            const total = characters.length;
            const unlocked = characters.filter(char => char.unlocked).length;
            const percentage = Math.round((unlocked / total) * 100);
            
            document.getElementById('collectionStats').textContent = `üèÜ ${unlocked} / ${total} (${percentage}%)`;
        }
        
        // „Ç≠„É£„É©„ÇØ„Çø„Éº„Ç´„Éº„Éâ„ÇíÁîüÊàê
        function createCharacterCard(character) {
            const isUnlocked = character.unlocked;
            
            return `
                <div class="character-card ${isUnlocked ? 'unlocked' : 'locked'}" 
                     onclick="showCharacterDetails(${character.id})">
                    <div class="image-container ${isUnlocked ? 'unlocked' : 'locked'}">
                        <div class="character-emoji">${isUnlocked ? character.emoji : '‚ùì'}</div>
                    </div>
                    <div class="details">
                        <h3 class="character-name">${isUnlocked ? character.name : '???'}</h3>
                        <p class="road-info">${isUnlocked ? `ÂõΩÈÅì${character.road}Âè∑` : 'ÂõΩÈÅì???Âè∑'}</p>
                        <div class="completion-status ${isUnlocked ? 'status-completed' : 'status-locked'}">
                            ${isUnlocked ? '‚úì ÂÖ•ÊâãÊ∏à„Åø' : 'üîí Êú™ÂÖ•Êâã'}
                        </div>
                    </div>
                </div>
            `;
        }
        
        // „Ç≠„É£„É©„ÇØ„Çø„Éº‰∏ÄË¶ß„ÇíË°®Á§∫
        function displayCharacters() {
            updateCharacterUnlockStatus();
            
            let filteredCharacters;
            switch(currentFilter) {
                case 'unlocked':
                    filteredCharacters = characters.filter(char => char.unlocked);
                    break;
                case 'locked':
                    filteredCharacters = characters.filter(char => !char.unlocked);
                    break;
                default:
                    filteredCharacters = characters;
            }
            
            // ÂõΩÈÅìÁï™Âè∑È†Ü„Å´„ÇΩ„Éº„Éà
            filteredCharacters.sort((a, b) => a.road - b.road);
            
            const grid = document.getElementById('characterGrid');
            grid.innerHTML = filteredCharacters.map(createCharacterCard).join('');
            
            updateCollectionStats();
        }
        
        // „Éï„Ç£„É´„Çø„ÉºÂàá„ÇäÊõø„Åà
        function filterCharacters(filter) {
            currentFilter = filter;
            
            // „Çø„Éñ„ÅÆË¶ã„ÅüÁõÆÊõ¥Êñ∞
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            displayCharacters();
        }
        
        // „Ç≠„É£„É©„ÇØ„Çø„ÉºË©≥Á¥∞Ë°®Á§∫
        function showCharacterDetails(characterId) {
            const character = characters.find(char => char.id === characterId);
            if (!character) return;
            
            const modal = document.getElementById('characterModal');
            const isUnlocked = character.unlocked;
            
            document.getElementById('modalEmoji').textContent = isUnlocked ? character.emoji : 'üîí';
            document.getElementById('modalName').textContent = isUnlocked ? character.name : '???';
            document.getElementById('modalRoad').textContent = isUnlocked ? `ÂõΩÈÅì${character.road}Âè∑` : 'ÂõΩÈÅì???Âè∑';
            document.getElementById('modalDescription').textContent = isUnlocked ? character.description : '„Åì„ÅÆÂõΩÈÅì„ÇíËµ∞Á†¥„Åô„Çã„Å®‰ª≤Èñì„Å´„Å™„Çä„Åæ„Åô„ÄÇ';
            
            const statsHtml = isUnlocked ? 
                `<div style="background: rgba(76,175,80,0.1); padding: 10px; border-radius: 10px; margin-top: 15px;">
                    <strong>‚úì ÂÖ•ÊâãÊ∏à„Åø„Ç≠„É£„É©„ÇØ„Çø„Éº</strong><br>
                    <small>ÂõΩÈÅì${character.road}Âè∑„ÇíËµ∞Á†¥„Åó„Å¶‰ª≤Èñì„Å´„Å™„Çä„Åæ„Åó„ÅüÔºÅ</small>
                </div>` :
                `<div style="background: rgba(158,158,158,0.1); padding: 10px; border-radius: 10px; margin-top: 15px;">
                    <strong>üîí Êú™ÂÖ•Êâã„Ç≠„É£„É©„ÇØ„Çø„Éº</strong><br>
                    <small>ÂõΩÈÅì${character.road}Âè∑„ÇíÂÆåÂÖ®Ëµ∞Á†¥„Åô„Çã„Å®‰ª≤Èñì„Å´„Å™„Çä„Åæ„Åô„ÄÇ</small>
                </div>`;
            
            document.getElementById('modalStats').innerHTML = statsHtml;
            
            modal.style.display = 'block';
        }
        
        // „É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
        function closeModal() {
            document.getElementById('characterModal').style.display = 'none';
        }
        
        // „Éû„ÉÉ„Éó„Å´Êàª„Çã
        function switchToMap() {
            window.location.href = 'gps9';
        }
        
        // Êñ∞„Åó„ÅÑ„Ç≠„É£„É©„ÇØ„Çø„Éº„Çí„Ç¢„É≥„É≠„ÉÉ„ÇØÔºà„ÉÜ„Çπ„ÉàÁî®Ôºâ
        function unlockCharacter(roadNumber) {
            if (!unlockedCharacters.includes(roadNumber)) {
                unlockedCharacters.push(roadNumber);
                localStorage.setItem('unlockedCharacters', JSON.stringify(unlockedCharacters));
                displayCharacters();
                
                // „Ç¢„É≥„É≠„ÉÉ„ÇØÈÄöÁü•
                const character = characters.find(char => char.road === roadNumber);
                if (character) {
                    alert(`üéâ Êñ∞„Åó„ÅÑ‰ª≤Èñì„ÅåÂä†„Çè„Çä„Åæ„Åó„ÅüÔºÅ\n${character.name}ÔºàÂõΩÈÅì${roadNumber}Âè∑Ôºâ`);
                }
            }
        }
        
        // „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥Âàá„ÇäÊõø„Åà
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
            });
        });
        
        // „É¢„Éº„ÉÄ„É´Â§ñ„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('characterModal');
            if (event.target === modal) {
                closeModal();
            }
        });
        
        // ÂàùÊúüË°®Á§∫
        window.addEventListener('load', function() {
            displayCharacters();
            
            // „ÉÜ„Çπ„ÉàÁî®Ôºö„Ç≥„É≥„ÇΩ„Éº„É´„Åß„Ç≠„É£„É©„ÇØ„Çø„Éº„Çí„Ç¢„É≥„É≠„ÉÉ„ÇØ„Åß„Åç„ÇãÊ©üËÉΩ
            window.unlockCharacter = unlockCharacter;
            console.log('„ÉÜ„Çπ„ÉàÁî®Ê©üËÉΩ: unlockCharacter(ÂõΩÈÅìÁï™Âè∑) „Åß„Ç≠„É£„É©„ÇØ„Çø„Éº„Çí„Ç¢„É≥„É≠„ÉÉ„ÇØ„Åß„Åç„Åæ„Åô');
            console.log('‰æã: unlockCharacter(3) „ÅßÂõΩÈÅì3Âè∑„ÅÆ„Ç≠„É£„É©„ÇØ„Çø„Éº„Çí„Ç¢„É≥„É≠„ÉÉ„ÇØ');
        });
    </script>
</body>
</html>